extends layout

include mixins/_errorMessage
include mixins/_loan

block content
  h1 Book: #{book.title || bookTitle}
  form(action=`/book/details/${book.id || bookId}` method="post")
    if errors
      h2.error Oooops!
      ul.error
        each error in errors
          +errorMessage(error)
    p
      label(for="title") Title
      input#title(type="text" name="title" value=`${book.title || ''}`)
    p
      label(for="author") Author
      input#author(type="text" name="author" value=`${book.author || ''}`)
    p
      label(for="genre") Genre
      input#genre(type="text" name="genre" value=`${book.genre || ''}`)
    p
      label(for="first_published") First Published
      input#first_published(type="text" name="first_published" value=`${book.first_published || ''}`)
    p
      input(type="submit" value="Update")
  
    h2 Loan History
    table
      thead
        tr
          th Book
          th Patron
          th Loaned On
          th Return By
          th Returned on
          th Action
      //- tbody
      //-   each loan in loans
      //-     +loan(loan, book)