extends layout

include mixins/_errorMessages
include mixins/_loan

block content
  h1 Book: #{book.title || bookTitle}
  form(action=`/book/details/${book.id || bookId}` method="post")
    if errors
      +errorMessages(errors)
    p
      label(for="title") Title
      input#title(type="text" name="title" value=`${book.title || ''}`)
    p
      label(for="author") Author
      input#author(type="text" name="author" value=`${book.author || ''}`)
    p
      label(for="genre") Genre
      input#genre(type="text" name="genre" value=`${book.genre || ''}`)
    p
      label(for="first_published") First Published
      input#first_published(type="text" name="first_published" value=`${book.first_published || ''}`)
    p
      input(type="submit" value="Update")

    if loans.length > 0
      h2 Loan History
      table
        thead
          tr
            th Book
            th Patron
            th Loaned On
            th Return By
            th Returned on
            th Action
        tbody
          each loan in loans
            +loan(loan)